import"./chunk-MS4AQ6UA.js";import{a as I,b as pe,c as me,d as ce,e as de,f as ge,g as fe,h as Ce,i as _e,j as E,k as he,l as xe,m as be,n as we,o as ve,p as Me,q as ye,r as Ue}from"./chunk-YYN3VUP3.js";import{a as ue,c as _}from"./chunk-EXW6ZDO3.js";import{a as Q,b,d as W,e as X,g as M,i as Y,j as Z,k as ee,l as te,m as ne,n as oe,o as ie,p as re,s as ae,w as se}from"./chunk-QSLSHPGL.js";import{J as le}from"./chunk-3672ZLHB.js";import{$a as q,Ba as D,Ca as P,Ea as R,Fa as H,Ga as u,Gb as $,Ha as n,Ia as o,Ja as h,K as y,Kb as J,N as m,Na as S,P as g,Pa as l,Q as f,Ra as G,Sb as k,Vb as A,X as C,db as a,eb as v,fa as z,ga as c,pb as O,ra as d,sa as U,sb as x,tb as K}from"./chunk-B7UG6L7Y.js";var N=class r{httpUserImg=m(J);router=m(k);apiService=m(I);delete=x();user=K.required();userImg;constructor(){}ngOnInit(){let e=new Date().getTime();this.user().gender==="male"?this.userImg=`https://api.dicebear.com/9.x/notionists/svg?seed=${this.user().id}&gender=female`:this.userImg=`https://api.dicebear.com/9.x/notionists/svg?seed=${this.user().id}&gender=female`,this.apiService.addUserIdImgMapping(this.user().id,this.userImg),console.log("UserCardComponent says user img requested on: ",this.userImg)}onClickDeleteButton(){let e=this.user().id;console.log("user-card says delete user with id: ",e),this.delete.emit(e)}openDetails(){console.log("user-card says open details of user with id: ",this.user().id),this.router.navigate(["/users",this.user().id]).then(e=>{})}panelOpenState2=C(!1);static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-user-card"]],inputs:{user:[1,"user"]},outputs:{delete:"delete"},decls:13,vars:2,consts:[[2,"display","flex","flex-direction","column"],[1,"user-card-header"],["alt","user image",3,"src"],[1,"user-card-info"],[3,"opened","closed"],[1,"card-button-group"],["matIconName","contact_page","matButtonContent","Details","backGroundColor","lightblue","textColor","darkblue","waveColor","darkblue",3,"click"],["matIconName","delete","matButtonContent","Delete","backGroundColor","#FFD9E1","textColor","#8F0045","waveColor","#8F0045",3,"click"]],template:function(t,i){t&1&&(n(0,"mat-accordion",0)(1,"div",1),h(2,"img",2),n(3,"div",3)(4,"span"),a(5),o()()(),n(6,"mat-expansion-panel",4),l("opened",function(){return i.panelOpenState2.set(!0)})("closed",function(){return i.panelOpenState2.set(!1)}),n(7,"mat-expansion-panel-header")(8,"mat-panel-title"),a(9," More details "),o()(),n(10,"div",5)(11,"app-custom-button",6),l("click",function(){return i.openDetails()}),o(),n(12,"app-custom-button",7),l("click",function(){return i.onClickDeleteButton()}),o()()()()),t&2&&(c(2),u("src",i.userImg,z),c(3),v(i.user().name))},dependencies:[de,pe,me,ce,_],styles:["mat-accordion[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100%}.user-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;background-color:#fff8f8;border-radius:15px;margin:10px;box-shadow:0 2px 3px #0000004d;padding:15px}.user-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;margin:15px;border-radius:15px;box-shadow:0 2px 3px #0000004d;flex-shrink:0}.user-card-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:15px;padding:15px;margin:10px;box-shadow:0 2px 3px #0000004d;flex:1;word-wrap:break-word;overflow-wrap:break-word}.user-card-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;max-width:100%;overflow:hidden;text-overflow:ellipsis}mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-description[_ngcontent-%COMP%]{margin:10px;order:1}mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{justify-content:center}.card-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;flex-wrap:wrap;gap:10px;padding:10px 0}@media (max-width: 479px){.user-card-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;padding:10px;margin:5px}.user-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;margin:10px auto}.user-card-info[_ngcontent-%COMP%]{width:100%;margin:5px 0;padding:10px}.user-card-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}}@media (min-width: 480px) and (max-width: 767px){.user-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px;margin:10px}.user-card-info[_ngcontent-%COMP%]{padding:12px;margin:8px}}"]})};var T=class r{router=m(k);inputValue=x();gridCols=x();newUser=x();isSearchVisible=!1;onClickGridCols(e){console.log("user-list-header says grid cols clicked: ",e),this.gridCols.emit(e)}onClickNewUser(){console.log("user-list-header says: new user clicked"),this.newUser.emit()}seeAllPosts(){this.router.navigate(["posts"]).catch(e=>console.error(e)).then(()=>console.log("Navigated to posts"))}onInputSearch(e){this.inputValue.emit(e)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-user-list-header"]],outputs:{inputValue:"inputValue",gridCols:"gridCols",newUser:"newUser"},decls:24,vars:1,consts:[["gridMenu","matMenu"],[1,"mat-toolbar-container"],[1,"mat-toolbar"],[1,"left-container"],["matIconName","web_stories","matButtonContent","See all posts","backGroundColor","#ADD8E6","textColor","#00008B","waveColor","#00008B",3,"click"],[1,"example-spacer"],[1,"right-container"],[1,"funct-container"],[1,"search-component",3,"searchKey"],["matIconName","add","matButtonContent","New user","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",1,"new-user-button",3,"click"],[1,"right-button-container"],["mat-icon-button","","aria-label","",1,"grid-button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(t,i){if(t&1){let s=S();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-custom-button",4),l("click",function(){return g(s),f(i.seeAllPosts())}),o(),h(4,"span",5),o(),n(5,"div",6)(6,"div",7)(7,"app-custom-search",8),l("searchKey",function(Pe){return g(s),f(i.onInputSearch(Pe))}),o(),n(8,"app-custom-button",9),l("click",function(){return g(s),f(i.onClickNewUser())}),o()(),n(9,"div",10)(10,"button",11)(11,"mat-icon"),a(12,"grid_view"),o()(),n(13,"mat-menu",null,0)(15,"button",12),l("click",function(){return g(s),f(i.onClickGridCols(1))}),n(16,"span"),a(17,"1 col"),o()(),n(18,"button",12),l("click",function(){return g(s),f(i.onClickGridCols(2))}),n(19,"span"),a(20,"2 cols"),o()(),n(21,"button",12),l("click",function(){return g(s),f(i.onClickGridCols(3))}),n(22,"span"),a(23,"3 cols"),o()()()()()()()}if(t&2){let s=q(14);c(10),u("matMenuTriggerFor",s)}},dependencies:[ue,le,Ce,fe,ge,oe,_,_e],styles:[".mat-toolbar-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;padding:0 10px}.mat-toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;border-radius:12px;margin-top:15px;min-height:65px;width:99%;max-width:100%;box-shadow:0 2px 3px #0000004d;padding:8px 12px;flex-wrap:wrap}.left-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-shrink:0}.right-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center;flex-wrap:wrap;gap:8px}.funct-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:8px;flex-wrap:wrap}.new-user-button[_ngcontent-%COMP%]{margin:0}.right-button-container[_ngcontent-%COMP%]{display:flex;gap:5px}.elements-button[_ngcontent-%COMP%], .grid-button[_ngcontent-%COMP%]{box-shadow:0 2px 3px #0000004d;margin:0}@media (min-width: 430px) and (max-width: 690px){.mat-toolbar[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;gap:10px;padding:10px 8px;min-height:auto}.left-container[_ngcontent-%COMP%]{margin:10px}.right-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.funct-container[_ngcontent-%COMP%]{width:100%;justify-content:center;gap:10px}.right-button-container[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 429px){.mat-toolbar[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;gap:10px;padding:10px 8px;min-height:auto}.funct-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;justify-content:center;margin:0}.right-button-container[_ngcontent-%COMP%]{justify-content:center;width:100%}  .mat-mdc-button-touch-target{width:40px!important;height:40px!important}}"]})};function Se(r,e){r&1&&(n(0,"p",11),a(1,"*Invalid data"),o())}var B=class r{fb=m(ne);dialogRef=m(E);isInvalid=!1;newUserForm=this.fb.group({name:new M("",[b.required]),email:new M("",[b.required,b.email]),gender:new M("",[b.required]),status:new M("",[b.required])});submitData(){if(this.newUserForm.invalid){console.log("create-user-dialog says: form invalid"),this.isInvalid=!0;return}this.isInvalid=!1,console.log("create-user-dialog says: ",this.newUserForm),this.dialogRef.close(this.newUserForm.value)}clearForm(){this.newUserForm.reset()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-create-user-dialog"]],decls:34,vars:2,consts:[[1,"new-user-form",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","email","required",""],["formControlName","gender","required",""],["value","male"],["value","female"],["value","other"],["formControlName","status","required",""],["value","active"],["value","inactive"],[2,"color","#BA1A1A"],[1,"form-button-group"],["matIconName","add","matButtonContent","Add","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",1,"add-button",3,"click"],["matIconName","delete","matButtonContent","Clear","backGroundColor","#FFD9E1","textColor","#8F0045","waveColor","#8F0045",1,"clear-button",3,"click"]],template:function(t,i){t&1&&(n(0,"app-custom-dialog-container")(1,"p"),a(2,"Insert new user"),o(),n(3,"form",0)(4,"mat-form-field",1)(5,"mat-label"),a(6,"Name"),o(),h(7,"input",2),o(),n(8,"mat-form-field",1)(9,"mat-label"),a(10,"Email"),o(),h(11,"input",3),o(),n(12,"mat-form-field",1)(13,"mat-label"),a(14,"Gender"),o(),n(15,"mat-select",4)(16,"mat-option",5),a(17,"Male"),o(),n(18,"mat-option",6),a(19,"Female"),o(),n(20,"mat-option",7),a(21,"Other"),o()()(),n(22,"mat-form-field",1)(23,"mat-label"),a(24,"Status"),o(),n(25,"mat-select",8)(26,"mat-option",9),a(27,"active"),o(),n(28,"mat-option",10),a(29,"inactive"),o()()()(),D(30,Se,2,0,"p",11),n(31,"div",12)(32,"app-custom-button",13),l("click",function(){return i.submitData()}),o(),n(33,"app-custom-button",14),l("click",function(){return i.clearForm()}),o()()()),t&2&&(c(3),u("formGroup",i.newUserForm),c(27),P(i.isInvalid?30:-1))},dependencies:[ie,Y,Q,W,X,te,Z,ee,ae,re,se,we,be,_,ve],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.new-user-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin-bottom:20px}.add-button[_ngcontent-%COMP%], .clear-button[_ngcontent-%COMP%]{margin:0 10px}"]})};var L=class r{ref=m(E);data=m(he);close(e){this.ref.close(e)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-confirm-dialog"]],decls:9,vars:2,consts:[[1,"confirm-dialog-container"],[1,"header-group"],[1,"button-group"],["matIconName","cancel","matButtonContent","Cancel","backGroundColor","#FFD9E1","textColor","#8F0045","waveColor","#8F0045",3,"click"],["matIconName","check_circle","matButtonContent","Confrim","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",3,"click"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"h4"),a(3),o(),n(4,"p"),a(5),o()(),n(6,"div",2)(7,"app-custom-button",3),l("click",function(){return i.close(!1)}),o(),n(8,"app-custom-button",4),l("click",function(){return i.close(!0)}),o()()()),t&2&&(c(3),v(i.data.title),c(2),v(i.data.content))},dependencies:[_],styles:[".confirm-dialog-container[_ngcontent-%COMP%]{margin:20px;padding:10px}.header-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}.header-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{word-wrap:break-word}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-top:15px;gap:10px;flex-wrap:wrap}@media (max-width: 479px){.confirm-dialog-container[_ngcontent-%COMP%]{margin:10px;padding:5px}.button-group[_ngcontent-%COMP%]{flex-direction:column;width:100%}.button-group[_ngcontent-%COMP%]   app-custom-button[_ngcontent-%COMP%]{width:100%}}"]})};var Oe=(r,e)=>e.id;function ke(r,e){r&1&&(n(0,"div",1)(1,"h2"),a(2,"No match found"),o()())}function Ie(r,e){if(r&1){let t=S();n(0,"app-user-card",5),l("delete",function(s){g(t);let p=G(2);return f(p.onDeleteUser(s))}),o()}if(r&2){let t=e.$implicit;u("user",t)}}function Ee(r,e){if(r&1&&(n(0,"app-custom-grid",2),R(1,Ie,1,1,"app-user-card",4,Oe),o()),r&2){let t=G();u("gridCols",t.gridCols()),c(),H(t.filteredUsers())}}var V=class r{apiService=m(I);dialog=m(xe);snackBar=m(Me);allUsers=C([]);searchTerm=C("");pageIndex=C(0);pageSize=C(5);gridCols=C(2);isLoading=C(!0);searchedUsers=O(()=>{let e=this.searchTerm().toLowerCase();return e?this.allUsers().filter(t=>t.name.toLowerCase().includes(e)||t.email.toLowerCase().includes(e)):this.allUsers()});filteredUsers=O(()=>{let e=this.searchedUsers(),t=this.pageSize()*this.pageIndex(),i=t+this.pageSize();return e.slice(t,i)});total=O(()=>this.searchedUsers().length);get page(){return this.pageIndex()}get per_page(){return this.pageSize()}ngOnInit(){console.log("user-list initialized"),this.load()}load(){this.apiService.userList({page:this.page,per_page:this.per_page,name:"",email:""}).subscribe({next:e=>{this.allUsers.set(e.body??[]),console.log("user-list says: loaded all users",this.allUsers().length)},error:e=>{console.error("Error loading users:",e),this.snackBar.open("Error loading users","Close",{duration:3e3})},complete:()=>{this.isLoading.set(!1)}})}onGridCols(e){this.gridCols.set(e)}onNewUser(){console.log("user-list says: new user clicked"),this.openCreateUserDialog()}openCreateUserDialog(){console.log("user-list says: opening dialog"),this.dialog.open(B).afterClosed().subscribe(e=>{console.log("user-list says: sending data...",e),e&&this.apiService.createUser(e).subscribe({next:()=>{this.snackBar.open("User created successfully","OK",{duration:3e3}),this.pageIndex.set(0),this.load()},error:t=>{let i=t?.error?.message||"Creation error";this.snackBar.open(i,"Close",{duration:3e3})}})})}onDeleteUser(e){console.log("user-list says deleting user with ",e),this.dialog.open(L,{data:{title:"Confirm Delete User",content:"Are you sure you want to delete this user?"}}).afterClosed().subscribe(i=>{console.log("confirm-dialog says after closed: ",i),i&&this.apiService.deleteUser(e).subscribe({next:()=>{this.snackBar.open("User deleted successfully.","OK",{duration:3e3});let s=this.allUsers().filter(p=>p.id!==e);this.allUsers.set(s),this.filteredUsers().length===0&&this.pageIndex()>0&&this.pageIndex.update(p=>p-1)},error:()=>{this.snackBar.open("User deletion failed","Close",{duration:2e3})}})})}onSearchKey(e){this.searchTerm.set(e),this.pageIndex.set(0)}onElementsPerPage(e){this.pageSize.set(e),this.pageIndex.set(0),console.log("user-list says: elements per page",e)}onPageChange(e){this.pageSize.set(e.pageSize),this.pageIndex.set(e.pageIndex),console.log("user-list says: per page changed",this.pageSize()),console.log(e)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-user-list"]],decls:4,vars:3,consts:[[3,"gridCols","newUser","inputValue"],[2,"display","flex","justify-content","center","align-items","center","height","50vh"],[3,"gridCols"],[3,"pageChange","pageSize","length"],[3,"user"],[3,"delete","user"]],template:function(t,i){t&1&&(n(0,"app-user-list-header",0),l("gridCols",function(p){return i.onGridCols(p)})("newUser",function(){return i.onNewUser()})("inputValue",function(p){return i.onSearchKey(p)}),o(),D(1,ke,3,0,"div",1)(2,Ee,3,1,"app-custom-grid",2),n(3,"app-custom-paginator",3),l("pageChange",function(p){return i.onPageChange(p)}),o()),t&2&&(c(),P(!i.isLoading()&&i.filteredUsers().length===0?1:2),c(2),u("pageSize",i.per_page)("length",i.total()))},dependencies:[N,T,ye,Ue],styles:["[_nghost-%COMP%]{display:block;padding-bottom:100px}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(var(--cols, 3),minmax(0,1fr));gap:30px}app-user-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;width:99%}@media (max-width: 479px){[_nghost-%COMP%]{padding-bottom:120px}}@media (min-width: 480px) and (max-width: 767px){[_nghost-%COMP%]{padding-bottom:110px}}"]})};var Ne=[{path:"",component:V},{path:":id",loadComponent:()=>import("./chunk-CVN263BX.js").then(r=>r.UserDetailsPageComponent)}],j=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=U({type:r});static \u0275inj=y({imports:[A.forChild(Ne),A]})};var De=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=U({type:r});static \u0275inj=y({imports:[$,j]})};export{De as UsersModule};
