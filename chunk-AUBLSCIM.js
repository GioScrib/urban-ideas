import{a as he,b as be}from"./chunk-GAH27JDS.js";import{a as k,c as le,d as me,e as ce,f as pe,g as de,h as C,m as ue,n as ge,o as fe,p as Ce,q as E,r as _e,s as xe,t as we,u as Me,v as ve}from"./chunk-YXTKP4I4.js";import{$ as se,B as Q,C as W,E as v,G as X,H as Y,I as Z,J as ee,K as te,L as ne,M as oe,Q as ie,T as re,X as ae,y as J,z as h}from"./chunk-YBMRMBKT.js";import{$a as a,Aa as H,Ba as q,Bb as $,Ca as u,Da as t,Ea as n,Fa as _,Fb as z,J as y,Ja as D,La as l,M as m,Na as L,Nb as P,O as g,P as f,Qb as A,V as w,Xa as G,ab as M,da as R,ea as c,ob as x,pa as d,pb as K,qa as U,ya as O,za as S}from"./chunk-TZHLYIMN.js";var F=class r{httpUserImg=m(z);router=m(P);apiService=m(k);delete=x();user=K.required();userImg;constructor(){}ngOnInit(){let e=new Date().getTime();this.user().gender==="male"?this.userImg=`https://api.dicebear.com/9.x/notionists/svg?seed=${this.user().id}&gender=female`:this.userImg=`https://api.dicebear.com/9.x/notionists/svg?seed=${this.user().id}&gender=female`,this.apiService.addUserIdImgMapping(this.user().id,this.userImg),console.log("UserCardComponent says user img requested on: ",this.userImg)}onClickDeleteButton(){let e=this.user().id;console.log("user-card says delete user with id: ",e),this.delete.emit(e)}openDetails(){console.log("user-card says open details of user with id: ",this.user().id),this.router.navigate(["/users",this.user().id]).then(e=>{})}panelOpenState2=w(!1);static \u0275fac=function(o){return new(o||r)};static \u0275cmp=d({type:r,selectors:[["app-user-card"]],inputs:{user:[1,"user"]},outputs:{delete:"delete"},decls:13,vars:2,consts:[[2,"display","flex","flex-direction","column"],[1,"user-card-header"],["alt","user image",3,"src"],[1,"user-card-info"],[3,"opened","closed"],[1,"card-button-group"],["matIconName","contact_page","matButtonContent","Details","backGroundColor","lightblue","textColor","darkblue","waveColor","darkblue",3,"click"],["matIconName","delete","matButtonContent","Delete","backGroundColor","#FFD9E1","textColor","#8F0045","waveColor","#8F0045",3,"click"]],template:function(o,i){o&1&&(t(0,"mat-accordion",0)(1,"div",1),_(2,"img",2),t(3,"div",3)(4,"span"),a(5),n()()(),t(6,"mat-expansion-panel",4),l("opened",function(){return i.panelOpenState2.set(!0)})("closed",function(){return i.panelOpenState2.set(!1)}),t(7,"mat-expansion-panel-header")(8,"mat-panel-title"),a(9," More details "),n()(),t(10,"div",5)(11,"app-custom-button",6),l("click",function(){return i.openDetails()}),n(),t(12,"app-custom-button",7),l("click",function(){return i.onClickDeleteButton()}),n()()()()),o&2&&(c(2),u("src",i.userImg,R),c(3),M(i.user().name))},dependencies:[pe,le,me,ce,C],styles:["mat-accordion[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100%}.user-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;background-color:#fff8f8;border-radius:15px;margin:10px;box-shadow:0 2px 3px #0000004d;padding:15px}.user-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;margin:15px;border-radius:15px;box-shadow:0 2px 3px #0000004d;flex-shrink:0}.user-card-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:15px;padding:15px;margin:10px;box-shadow:0 2px 3px #0000004d;flex:1;word-wrap:break-word;overflow-wrap:break-word}.user-card-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;max-width:100%;overflow:hidden;text-overflow:ellipsis}mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-description[_ngcontent-%COMP%]{margin:10px;order:1}mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{justify-content:center}.card-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;flex-wrap:wrap;gap:10px;padding:10px 0}@media (max-width: 479px){.user-card-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;padding:10px;margin:5px}.user-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;margin:10px auto}.user-card-info[_ngcontent-%COMP%]{width:100%;margin:5px 0;padding:10px}.user-card-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}}@media (min-width: 480px) and (max-width: 767px){.user-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px;margin:10px}.user-card-info[_ngcontent-%COMP%]{padding:12px;margin:8px}}"]})};var N=class r{router=m(P);inputValue=x();gridCols=x();newUser=x();isSearchVisible=!1;onClickGridCols(e){console.log("user-list-header says grid cols clicked: ",e),this.gridCols.emit(e)}onClickNewUser(){console.log("user-list-header says: new user clicked"),this.newUser.emit()}seeAllPosts(){this.router.navigate(["posts"]).catch(e=>console.error(e)).then(()=>console.log("Navigated to posts"))}onInputSearch(e){this.inputValue.emit(e)}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=d({type:r,selectors:[["app-user-list-header"]],outputs:{inputValue:"inputValue",gridCols:"gridCols",newUser:"newUser"},decls:38,vars:2,consts:[["elementsMenu","matMenu"],["gridMenu","matMenu"],[1,"mat-toolbar-container"],[1,"mat-toolbar"],[1,"left-container"],["matIconName","web_stories","matButtonContent","See all posts","backGroundColor","#ADD8E6","textColor","#00008B","waveColor","#00008B",3,"click"],[1,"example-spacer"],[1,"right-container"],[1,"funct-container"],[1,"search-component",3,"searchKey"],["matIconName","add","matButtonContent","New user","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",1,"new-user-button",3,"click"],[1,"right-button-container"],["mat-icon-button","","aria-label","Example icon-button with a menu",1,"elements-button",3,"matMenuTriggerFor"],["mat-menu-item",""],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"grid-button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(o,i){if(o&1){let s=D();t(0,"div",2)(1,"div",3)(2,"div",4)(3,"app-custom-button",5),l("click",function(){return g(s),f(i.seeAllPosts())}),n(),_(4,"span",6),n(),t(5,"div",7)(6,"div",8)(7,"app-custom-search",9),l("searchKey",function(Ue){return g(s),f(i.onInputSearch(Ue))}),n(),t(8,"app-custom-button",10),l("click",function(){return g(s),f(i.onClickNewUser())}),n()(),t(9,"div",11)(10,"button",12)(11,"mat-icon"),a(12,"more_vert"),n()(),t(13,"mat-menu",null,0)(15,"button",13)(16,"span"),a(17,"10 elementi"),n()(),t(18,"button",13)(19,"span"),a(20,"20 elementi"),n()(),t(21,"button",13)(22,"span"),a(23,"30 elementi"),n()()(),t(24,"button",14)(25,"mat-icon"),a(26,"grid_view"),n()(),t(27,"mat-menu",null,1)(29,"button",15),l("click",function(){return g(s),f(i.onClickGridCols(1))}),t(30,"span"),a(31,"1 col"),n()(),t(32,"button",15),l("click",function(){return g(s),f(i.onClickGridCols(2))}),t(33,"span"),a(34,"2 cols"),n()(),t(35,"button",15),l("click",function(){return g(s),f(i.onClickGridCols(3))}),t(36,"span"),a(37,"3 cols"),n()()()()()()()}if(o&2){let s=G(14),p=G(28);c(10),u("matMenuTriggerFor",s),c(14),u("matMenuTriggerFor",p)}},dependencies:[de,se,fe,ge,ue,ne,C,Ce],styles:[".mat-toolbar-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;padding:0 10px}.mat-toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;border-radius:12px;margin-top:15px;min-height:65px;width:99%;max-width:100%;box-shadow:0 2px 3px #0000004d;padding:8px 12px;flex-wrap:wrap}.left-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-shrink:0}.right-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center;flex-wrap:wrap;gap:8px}.funct-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:8px;flex-wrap:wrap}.new-user-button[_ngcontent-%COMP%]{margin:0}.right-button-container[_ngcontent-%COMP%]{display:flex;gap:5px}.elements-button[_ngcontent-%COMP%], .grid-button[_ngcontent-%COMP%]{box-shadow:0 2px 3px #0000004d;margin:0}@media (min-width: 430px) and (max-width: 690px){.mat-toolbar[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;gap:10px;padding:10px 8px;min-height:auto}.left-container[_ngcontent-%COMP%]{margin:10px}.right-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.funct-container[_ngcontent-%COMP%]{width:100%;justify-content:center;gap:10px}.right-button-container[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 429px){.mat-toolbar[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;gap:10px;padding:10px 8px;min-height:auto}.funct-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;justify-content:center;margin:0}.right-button-container[_ngcontent-%COMP%]{justify-content:center;width:100%}  .mat-mdc-button-touch-target{width:40px!important;height:40px!important}}"]})};function Oe(r,e){r&1&&(t(0,"p",11),a(1,"*Invalid data"),n())}var T=class r{fb=m(te);dialogRef=m(E);isInvalid=!1;newUserForm=this.fb.group({name:new v("",[h.required]),email:new v("",[h.required,h.email]),gender:new v("",[h.required]),status:new v("",[h.required])});submitData(){if(this.newUserForm.invalid){console.log("create-user-dialog says: form invalid"),this.isInvalid=!0;return}this.isInvalid=!1,console.log("create-user-dialog says: ",this.newUserForm),this.dialogRef.close(this.newUserForm.value)}clearForm(){this.newUserForm.reset()}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=d({type:r,selectors:[["app-create-user-dialog"]],decls:34,vars:2,consts:[[1,"new-user-form",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","email","required",""],["formControlName","gender","required",""],["value","male"],["value","female"],["value","other"],["formControlName","status","required",""],["value","active"],["value","inactive"],[2,"color","#BA1A1A"],[1,"form-button-group"],["matIconName","add","matButtonContent","Add","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",1,"add-button",3,"click"],["matIconName","delete","matButtonContent","Clear","backGroundColor","#FFD9E1","textColor","#8F0045","waveColor","#8F0045",1,"clear-button",3,"click"]],template:function(o,i){o&1&&(t(0,"app-custom-dialog-container")(1,"p"),a(2,"Insert new user"),n(),t(3,"form",0)(4,"mat-form-field",1)(5,"mat-label"),a(6,"Name"),n(),_(7,"input",2),n(),t(8,"mat-form-field",1)(9,"mat-label"),a(10,"Email"),n(),_(11,"input",3),n(),t(12,"mat-form-field",1)(13,"mat-label"),a(14,"Gender"),n(),t(15,"mat-select",4)(16,"mat-option",5),a(17,"Male"),n(),t(18,"mat-option",6),a(19,"Female"),n(),t(20,"mat-option",7),a(21,"Other"),n()()(),t(22,"mat-form-field",1)(23,"mat-label"),a(24,"Status"),n(),t(25,"mat-select",8)(26,"mat-option",9),a(27,"active"),n(),t(28,"mat-option",10),a(29,"inactive"),n()()()(),O(30,Oe,2,0,"p",11),t(31,"div",12)(32,"app-custom-button",13),l("click",function(){return i.submitData()}),n(),t(33,"app-custom-button",14),l("click",function(){return i.clearForm()}),n()()()),o&2&&(c(3),u("formGroup",i.newUserForm),c(27),S(i.isInvalid?30:-1))},dependencies:[oe,X,J,Q,W,ee,Y,Z,re,ie,ae,be,he,C,we],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.new-user-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin-bottom:20px}.add-button[_ngcontent-%COMP%], .clear-button[_ngcontent-%COMP%]{margin:0 10px}"]})};var B=class r{ref=m(E);data=m(_e);close(e){this.ref.close(e)}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=d({type:r,selectors:[["app-confirm-dialog"]],decls:9,vars:2,consts:[[1,"confirm-dialog-container"],[1,"header-group"],[1,"button-group"],["matIconName","cancel","matButtonContent","Cancel","backGroundColor","#FFD9E1","textColor","#8F0045","waveColor","#8F0045",3,"click"],["matIconName","check_circle","matButtonContent","Confrim","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",3,"click"]],template:function(o,i){o&1&&(t(0,"div",0)(1,"div",1)(2,"h4"),a(3),n(),t(4,"p"),a(5),n()(),t(6,"div",2)(7,"app-custom-button",3),l("click",function(){return i.close(!1)}),n(),t(8,"app-custom-button",4),l("click",function(){return i.close(!0)}),n()()()),o&2&&(c(3),M(i.data.title),c(2),M(i.data.content))},dependencies:[C],styles:[".confirm-dialog-container[_ngcontent-%COMP%]{margin:20px;padding:10px}.header-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}.header-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{word-wrap:break-word}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-top:15px;gap:10px;flex-wrap:wrap}@media (max-width: 479px){.confirm-dialog-container[_ngcontent-%COMP%]{margin:10px;padding:5px}.button-group[_ngcontent-%COMP%]{flex-direction:column;width:100%}.button-group[_ngcontent-%COMP%]   app-custom-button[_ngcontent-%COMP%]{width:100%}}"]})};var Se=(r,e)=>e.id;function De(r,e){r&1&&(t(0,"div",1)(1,"h2"),a(2,"No match found"),n()())}function Pe(r,e){if(r&1){let o=D();t(0,"app-user-card",4),l("delete",function(s){g(o);let p=L(2);return f(p.onDeleteUser(s))}),n()}if(r&2){let o=e.$implicit;u("user",o)}}function ke(r,e){if(r&1&&(t(0,"app-custom-grid",2),H(1,Pe,1,1,"app-user-card",3,Se),n()),r&2){let o=L();u("gridCols",o.gridCols),c(),q(o.filteredUsers)}}var V=class r{apiService=m(k);dialog=m(xe);snackBar=m(Me);users;filteredUsers;page=1;per_page=10;total=0;name;email;gridCols=2;panelOpenState1=w(!1);panelOpenState2=w(!1);constructor(){}ngOnInit(){console.log("user-list initialized"),this.load()}load(){this.apiService.userList({page:this.page,per_page:this.per_page,name:this.name??"",email:this.email??""}).subscribe(e=>{this.users=e.body??[],this.filteredUsers=this.users,console.log("user-list says: "),console.log(this.users),console.log("user-list-says: filtered users",this.filteredUsers),this.total=Number(e.headers.get("x-Pagination-Total")??0)})}onGridCols(e){console.log("user-list dice: ",e),this.gridCols=e}onNewUser(){console.log("user-list says: new user clicked"),this.openCreateUserDialog()}openCreateUserDialog(){console.log("user-list says: opening dialog"),this.dialog.open(T).afterClosed().subscribe(e=>{console.log("user-list says: sending data...",e),e&&this.apiService.createUser(e).subscribe({next:()=>{this.snackBar.open("User created successfully","OK",{duration:3e3}),this.load()},error:o=>{let i=o?.error?.message||"Creation error";this.snackBar.open(i,"Chiudi",{duration:3e3})}})})}onDeleteUser(e){console.log("user-list says deleting user with ",e),this.dialog.open(B,{data:{title:"Confirm Delete User",content:"Are you sure you want to delete this user?"}}).afterClosed().subscribe(i=>{console.log("confirm-dialog says after closed: ",i),i&&this.apiService.deleteUser(e).subscribe({next:()=>{this.snackBar.open("User deleted successfully.","OK",{duration:3e3}),this.load()},error:()=>{this.snackBar.open("User deleted failed","Chiudi",{duration:2e3})}})})}onSearchKey(e){if(!e||e.length===0){this.filteredUsers=this.users;return}this.filteredUsers=this.users.filter(o=>o.name.toLowerCase().includes(e.toLowerCase())||o.email.toLowerCase().includes(e.toLowerCase()))}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=d({type:r,selectors:[["app-user-list"]],decls:3,vars:1,consts:[[3,"gridCols","newUser","inputValue"],[2,"display","flex","justify-content","center","align-items","center","height","50vh"],[3,"gridCols"],[3,"user"],[3,"delete","user"]],template:function(o,i){o&1&&(t(0,"app-user-list-header",0),l("gridCols",function(p){return i.onGridCols(p)})("newUser",function(){return i.onNewUser()})("inputValue",function(p){return i.onSearchKey(p)}),n(),O(1,De,3,0,"div",1)(2,ke,3,1,"app-custom-grid",2)),o&2&&(c(),S(i.filteredUsers.length===0?1:2))},dependencies:[F,N,ve],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(var(--cols, 3),minmax(0,1fr));gap:30px}app-user-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;width:99%}"]})};var Ee=[{path:"",component:V},{path:":id",loadComponent:()=>import("./chunk-MB2AFSPG.js").then(r=>r.UserDetailsPageComponent)}],j=class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=U({type:r});static \u0275inj=y({imports:[A.forChild(Ee),A]})};var ye=class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=U({type:r});static \u0275inj=y({imports:[$,j]})};export{ye as UsersModule};
