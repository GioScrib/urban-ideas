import{J as i,Kb as n,M as r,Sb as a}from"./chunk-XTFFYJHZ.js";var l=class o{constructor(t,e){this.router=t;this.http=e}TOKEN_KEY="auth_token";login(t){t?.trim()?(localStorage.setItem(this.TOKEN_KEY,t.trim()),console.log("AuthService: token salvato, in validazione..."),this.http.get("https://gorest.co.in/public/v2/users",{params:{per_page:1}}).subscribe({next:()=>{console.log("AuthService: token valido"),this.router.navigate(["/users"])},error:e=>{console.log("AuthService: token non valido",e)}})):console.log("AuthService: nessun token fornito")}logout(){localStorage.removeItem(this.TOKEN_KEY),console.log("AuthService: logout effettuato"),this.router.navigate(["/auth"])}logoutWithError(t){localStorage.removeItem(this.TOKEN_KEY),console.log("AuthService: logout con errore -",t),this.router.navigate(["/auth"],{queryParams:{error:t}})}isAuthenticated(){return typeof localStorage<"u"&&!!localStorage.getItem(this.TOKEN_KEY)}getToken(){return typeof localStorage<"u"?localStorage.getItem(this.TOKEN_KEY):null}static \u0275fac=function(e){return new(e||o)(r(a),r(n))};static \u0275prov=i({token:o,factory:o.\u0275fac,providedIn:"root"})};export{l as a};
