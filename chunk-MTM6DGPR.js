import{a as me}from"./chunk-AUP5YZYJ.js";import"./chunk-MS4AQ6UA.js";import{a as D,f as X,g as Y,h as Z,i as ee,j as te,l as oe,m as ne,n as ie,o as re,p as ae,q as se,r as le}from"./chunk-CUVUES7D.js";import{a as W,c as F}from"./chunk-EXW6ZDO3.js";import{a as j,b,d as G,e as V,g as k,i as K,j as z,k as q,m as H,n as S,o as U,p as A,q as R,t as $,x as J}from"./chunk-V33HW3GU.js";import{J as Q}from"./chunk-3672ZLHB.js";import{$a as L,Ba as c,Ca as d,Ea as w,Fa as y,Ga as g,Ha as i,Ia as r,Ja as P,N as u,Na as E,P as C,Pa as m,Q as f,Ra as x,Tb as B,X as _,db as a,eb as T,ga as s,jb as I,pb as v,ra as h,sb as M}from"./chunk-B7UG6L7Y.js";var N=class o{searchKey=M();gridCols=M();newPostClick=M();onClickGridCols(e){console.log("post-list-page-header says grid cols clicked: ",e),this.gridCols.emit(e)}onClickNewPost(){console.log("post-list-page-header says: new post clicked"),this.newPostClick.emit()}onSearchKey(e){this.searchKey.emit(e)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["app-post-list-page-header"]],outputs:{searchKey:"searchKey",gridCols:"gridCols",newPostClick:"newPostClick"},decls:23,vars:1,consts:[["gridMenu","matMenu"],[1,"mat-toolbar-container"],[1,"mat-toolbar"],[1,"left-container"],["routerLink","/users"],["matIconName","contacts","matButtonContent","See all users","backGroundColor","#ADD8E6","textColor","#00008B","waveColor","#00008B"],[1,"right-container"],[3,"searchKey"],["matIconName","add","matButtonContent","New Post","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",1,"new-user-button",3,"click"],[1,"right-button-container"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"grid-button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(t,n){if(t&1){let l=E();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"a",4),P(4,"app-custom-button",5),r()(),i(5,"div",6)(6,"app-custom-search",7),m("searchKey",function(ge){return C(l),f(n.onSearchKey(ge))}),r(),i(7,"app-custom-button",8),m("click",function(){return C(l),f(n.onClickNewPost())}),r(),i(8,"div",9)(9,"button",10)(10,"mat-icon"),a(11,"grid_view"),r()(),i(12,"mat-menu",null,0)(14,"button",11),m("click",function(){return C(l),f(n.onClickGridCols(1))}),i(15,"span"),a(16,"1 col"),r()(),i(17,"button",11),m("click",function(){return C(l),f(n.onClickGridCols(2))}),i(18,"span"),a(19,"2 cols"),r()(),i(20,"button",11),m("click",function(){return C(l),f(n.onClickGridCols(3))}),i(21,"span"),a(22,"3 cols"),r()()()()()()()}if(t&2){let l=L(13);s(9),g("matMenuTriggerFor",l)}},dependencies:[F,S,W,Q,Y,X,B,Z,ee],styles:[".mat-toolbar-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;padding:0 10px}.mat-toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;border-radius:12px;margin-top:15px;min-height:65px;width:99%;max-width:100%;box-shadow:0 2px 3px #0000004d;padding:8px 12px;flex-wrap:wrap}.left-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-shrink:0}.right-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center;flex-wrap:wrap;gap:8px}.funct-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:8px;flex-wrap:wrap}.new-user-button[_ngcontent-%COMP%]{margin:0}.right-button-container[_ngcontent-%COMP%]{display:flex;gap:5px}.elements-button[_ngcontent-%COMP%], .grid-button[_ngcontent-%COMP%]{box-shadow:0 2px 3px #0000004d;margin:0}@media (min-width: 410px) and (max-width: 640px){.mat-toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:10px;padding:10px 8px}.left-container[_ngcontent-%COMP%]{width:100%;justify-content:center}.right-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:10px;margin-top:20px;margin-bottom:20px}.funct-container[_ngcontent-%COMP%]{width:100%;justify-content:center;gap:10px}.right-button-container[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 409px){.mat-toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:10px;padding:10px 8px}.left-container[_ngcontent-%COMP%]{width:100%;justify-content:center}.right-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:10px;margin-top:20px;margin-bottom:20px}.funct-container[_ngcontent-%COMP%]{width:100%;justify-content:center;gap:10px}.right-button-container[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var ue=(o,e)=>e.id;function Ce(o,e){if(o&1&&(i(0,"mat-option",3),a(1),r()),o&2){let t=e.$implicit;g("value",I(t.email)),s(),T(t.email)}}function fe(o,e){o&1&&a(0," user is required ")}function _e(o,e){if(o&1&&(i(0,"mat-error"),c(1,fe,1,0),r()),o&2){let t=x();s(),d(t.newPostForm.controls.userName.hasError("required")?1:-1)}}function he(o,e){o&1&&a(0," title is required ")}function Pe(o,e){if(o&1&&(i(0,"mat-error"),c(1,he,1,0),r()),o&2){let t=x();s(),d(t.newPostForm.controls.title.hasError("required")?1:-1)}}function xe(o,e){o&1&&a(0," body is required ")}function be(o,e){if(o&1&&(i(0,"mat-error"),c(1,xe,1,0),r()),o&2){let t=x();s(),d(t.newPostForm.controls.body.hasError("required")?1:-1)}}var O=class o{fb=u(H);dialogRef=u(te);apiService=u(D);isInvalid=!1;userList=[];ngOnInit(){this.loadUsers()}loadUsers(){this.apiService.userList({}).subscribe(e=>{this.userList=e.body,console.log("create-post-dialog says: loaded users",this.userList)})}newPostForm=this.fb.group({userName:new k("",[b.required]),title:new k("",[b.required]),body:new k("",[b.maxLength(1e3),b.required])});submitData(){if(this.newPostForm.invalid){console.log("new-poster-dialog says: form invalid");return}console.log("new-poster-dialog says: ",this.newPostForm);let t={user_id:this.userList?.find(n=>n.email===this.newPostForm.value.userName)?.id,title:this.newPostForm.value.title,body:this.newPostForm.value.body};console.log("new-poster-dialog-says: post created",t),this.dialogRef.close(t)}clearForm(){this.newPostForm.reset()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["app-create-post-dialog"]],decls:25,vars:4,consts:[[1,"new-post-form",3,"formGroup"],["appearance","outline",1,"mat-form-field-medium-space"],["formControlName","userName"],[3,"value"],["matInput","","formControlName","title"],["matInput","","formControlName","body"],[1,"form-button-group"],["matIconName","add","matButtonContent","Add","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",1,"add-button",3,"click"],["matIconName","delete","matButtonContent","Clear","backGroundColor","#FFD9E1","textColor","#8F0045","waveColor","#8F0045",1,"clear-button",3,"click"]],template:function(t,n){t&1&&(i(0,"app-custom-dialog-container")(1,"p"),a(2,"Insert new Post"),r(),i(3,"form",0)(4,"mat-form-field",1)(5,"mat-label"),a(6,"Username"),r(),i(7,"mat-select",2),w(8,Ce,2,3,"mat-option",3,ue),r(),c(10,_e,2,1,"mat-error"),r(),i(11,"mat-form-field",1)(12,"mat-label"),a(13,"Title"),r(),P(14,"input",4),c(15,Pe,2,1,"mat-error"),r(),i(16,"mat-form-field",1)(17,"mat-label"),a(18,"Body"),r(),i(19,"textarea",5),a(20," "),r(),c(21,be,2,1,"mat-error"),r()(),i(22,"div",6)(23,"app-custom-button",7),m("click",function(){return n.submitData()}),r(),i(24,"app-custom-button",8),m("click",function(){return n.clearForm()}),r()()()),t&2&&(s(3),g("formGroup",n.newPostForm),s(5),y(n.userList),s(2),d(n.newPostForm.controls.userName.invalid&&n.newPostForm.controls.userName.touched?10:-1),s(5),d(n.newPostForm.controls.title.invalid&&n.newPostForm.controls.title.touched?15:-1),s(6),d(n.newPostForm.controls.body.invalid&&n.newPostForm.controls.body.touched?21:-1))},dependencies:[F,re,S,K,j,G,V,$,J,A,ne,ie,U,z,q,R],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.new-post-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin-bottom:20px}.add-button[_ngcontent-%COMP%], .clear-button[_ngcontent-%COMP%]{margin:0 10px}.mat-form-field-medium-space[_ngcontent-%COMP%]{margin-bottom:10px}.mat-form-field-large-space[_ngcontent-%COMP%]{margin-bottom:20px}"]})};var we=(o,e)=>e.id;function ye(o,e){o&1&&(i(0,"div",1)(1,"h2"),a(2,"No match found"),r()())}function ve(o,e){if(o&1&&P(0,"app-user-post-card",4),o&2){let t=e.$implicit;g("post",t)}}function Me(o,e){if(o&1&&(i(0,"app-custom-grid",2),w(1,ve,1,1,"app-user-post-card",4,we),r()),o&2){let t=x();g("gridCols",t.gridCols()),s(),y(t.filteredPosts())}}var de=class o{apiService=u(D);dialog=u(oe);snackBar=u(ae);allPosts=_([]);searchTerm=_("");pageIndex=_(0);pageSize=_(5);gridCols=_(2);isLoading=!0;get page(){return this.pageIndex()}get per_page(){return this.pageSize()}searchedPosts=v(()=>{let e=this.searchTerm().toLowerCase();return e?this.allPosts().filter(t=>t.title.includes(e)||t.body.includes(e)):this.allPosts()});filteredPosts=v(()=>{let e=this.searchedPosts(),t=this.pageSize()*this.pageIndex(),n=t+this.pageSize();return e.slice(t,n)});total=v(()=>this.searchedPosts().length);ngOnInit(){console.log("PostListComponent says: initialized"),this.load()}load(){this.apiService.getPostList({page:this.page,per_page:this.per_page,name:"",email:""}).subscribe({next:e=>{this.allPosts.set(e.body??[]),console.log("post-list-component says: ",this.allPosts)},complete:()=>{this.isLoading=!1}})}onClickGridCols(e){console.log("post-list-component says grid cols clicked: ",e),this.gridCols.set(e)}onClickNewPost(){console.log("post-list-component says: new post clicked"),this.openCreatePostDialog()}openCreatePostDialog(){console.log("post-list-component says: open create post dialog"),this.dialog.open(O).afterClosed().subscribe(e=>{console.log("post-list-component says: dialog closed with data: ",e),e&&this.apiService.addUserPost(e).subscribe({next:()=>{this.snackBar.open("Post created successfully","OK",{duration:3e3}),this.load()},error:t=>{let n=t?.error?.message||"Creation error";this.snackBar.open(n,"Chiudi",{duration:3e3})}})})}onSearchKeyValue(e){this.searchTerm.set(e),this.pageIndex.set(0),console.log("post-list says: searching for key ",e)}onPageChange(e){this.pageIndex.set(e.pageIndex),this.pageSize.set(e.pageSize),console.log("post-list says: page changed ",e)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["app-post-list"]],decls:4,vars:3,consts:[[3,"gridCols","newPostClick","searchKey"],[2,"display","flex","justify-content","center","align-items","center","height","50vh"],[3,"gridCols"],[3,"pageChange","pageSize","length"],[3,"post"]],template:function(t,n){t&1&&(i(0,"app-post-list-page-header",0),m("gridCols",function(p){return n.onClickGridCols(p)})("newPostClick",function(){return n.onClickNewPost()})("searchKey",function(p){return n.onSearchKeyValue(p)}),r(),c(1,ye,3,0,"div",1)(2,Me,3,1,"app-custom-grid",2),i(3,"app-custom-paginator",3),m("pageChange",function(p){return n.onPageChange(p)}),r()),t&2&&(s(),d(n.filteredPosts().length===0&&!n.isLoading?1:2),s(2),g("pageSize",n.per_page)("length",n.total()))},dependencies:[se,me,N,le],styles:["[_nghost-%COMP%]{display:block;padding-bottom:100px}@media (max-width: 479px){[_nghost-%COMP%]{padding-bottom:120px}}@media (min-width: 480px) and (max-width: 767px){[_nghost-%COMP%]{padding-bottom:110px}}"]})};export{de as PostListComponent};
