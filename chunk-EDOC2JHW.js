import"./chunk-MS4AQ6UA.js";import{a as E,b as ce,c as pe,d as de,e as ue,f as fe,g as Ce,h as _e,i as xe,j as I,k as he,l as we,m as be,n as ve,o as Me,p as Ue,q as ye,r as De}from"./chunk-CUVUES7D.js";import{a as ge,c as w}from"./chunk-EXW6ZDO3.js";import{a as Q,b as M,d as W,e as X,g as D,i as Y,j as Z,k as ee,l as te,m as ne,n as oe,o as ie,p as re,q as ae,t as se,x as le}from"./chunk-V33HW3GU.js";import{J as me}from"./chunk-3672ZLHB.js";import{$a as H,Ba as d,Ca as u,Ea as z,Fa as R,Ga as f,Gb as $,Ha as i,Ia as r,Ja as b,K as P,Kb as J,N as p,Na as O,P as C,Pa as m,Q as _,Ra as h,Sb as F,Vb as q,X as x,db as a,eb as y,fa as A,ga as l,pb as k,ra as g,sa as S,sb as v,tb as K}from"./chunk-B7UG6L7Y.js";var N=class t{httpUserImg=p(J);router=p(F);apiService=p(E);delete=v();user=K.required();userImg;constructor(){}ngOnInit(){let e=new Date().getTime();this.user().gender==="male"?this.userImg=`https://api.dicebear.com/9.x/notionists/svg?seed=${this.user().id}&gender=female`:this.userImg=`https://api.dicebear.com/9.x/notionists/svg?seed=${this.user().id}&gender=female`,this.apiService.addUserIdImgMapping(this.user().id,this.userImg),console.log("UserCardComponent says user img requested on: ",this.userImg)}onClickDeleteButton(){let e=this.user().id;console.log("user-card says delete user with id: ",e),this.delete.emit(e)}openDetails(){console.log("user-card says open details of user with id: ",this.user().id),this.router.navigate(["/users",this.user().id]).then(e=>{})}panelOpenState2=x(!1);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=g({type:t,selectors:[["app-user-card"]],inputs:{user:[1,"user"]},outputs:{delete:"delete"},decls:13,vars:2,consts:[[2,"display","flex","flex-direction","column"],[1,"user-card-header"],["alt","user image",3,"src"],[1,"user-card-info"],[3,"opened","closed"],[1,"card-button-group"],["matIconName","contact_page","matButtonContent","Details","backGroundColor","lightblue","textColor","darkblue","waveColor","darkblue",3,"click"],["matIconName","delete","matButtonContent","Delete","backGroundColor","#FFD9E1","textColor","#8F0045","waveColor","#8F0045",3,"click"]],template:function(n,o){n&1&&(i(0,"mat-accordion",0)(1,"div",1),b(2,"img",2),i(3,"div",3)(4,"span"),a(5),r()()(),i(6,"mat-expansion-panel",4),m("opened",function(){return o.panelOpenState2.set(!0)})("closed",function(){return o.panelOpenState2.set(!1)}),i(7,"mat-expansion-panel-header")(8,"mat-panel-title"),a(9," More details "),r()(),i(10,"div",5)(11,"app-custom-button",6),m("click",function(){return o.openDetails()}),r(),i(12,"app-custom-button",7),m("click",function(){return o.onClickDeleteButton()}),r()()()()),n&2&&(l(2),f("src",o.userImg,A),l(3),y(o.user().name))},dependencies:[ue,ce,pe,de,w],styles:["mat-accordion[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100%}.user-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;background-color:#fff8f8;border-radius:15px;margin:10px;box-shadow:0 2px 3px #0000004d;padding:15px}.user-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;margin:15px;border-radius:15px;box-shadow:0 2px 3px #0000004d;flex-shrink:0}.user-card-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:15px;padding:15px;margin:10px;box-shadow:0 2px 3px #0000004d;flex:1;word-wrap:break-word;overflow-wrap:break-word}.user-card-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;max-width:100%;overflow:hidden;text-overflow:ellipsis}mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-description[_ngcontent-%COMP%]{margin:10px;order:1}mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{justify-content:center}.card-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;flex-wrap:wrap;gap:10px;padding:10px 0}@media (max-width: 479px){.user-card-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;padding:10px;margin:5px}.user-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;margin:10px auto}.user-card-info[_ngcontent-%COMP%]{width:100%;margin:5px 0;padding:10px}.user-card-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}}@media (min-width: 480px) and (max-width: 767px){.user-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px;margin:10px}.user-card-info[_ngcontent-%COMP%]{padding:12px;margin:8px}}"]})};var B=class t{router=p(F);inputValue=v();gridCols=v();newUser=v();isSearchVisible=!1;onClickGridCols(e){console.log("user-list-header says grid cols clicked: ",e),this.gridCols.emit(e)}onClickNewUser(){console.log("user-list-header says: new user clicked"),this.newUser.emit()}seeAllPosts(){this.router.navigate(["posts"]).catch(e=>console.error(e)).then(()=>console.log("Navigated to posts"))}onInputSearch(e){this.inputValue.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=g({type:t,selectors:[["app-user-list-header"]],outputs:{inputValue:"inputValue",gridCols:"gridCols",newUser:"newUser"},decls:24,vars:1,consts:[["gridMenu","matMenu"],[1,"mat-toolbar-container"],[1,"mat-toolbar"],[1,"left-container"],["matIconName","web_stories","matButtonContent","See all posts","backGroundColor","#ADD8E6","textColor","#00008B","waveColor","#00008B",3,"click"],[1,"example-spacer"],[1,"right-container"],[1,"funct-container"],[1,"search-component",3,"searchKey"],["matIconName","add","matButtonContent","New user","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",1,"new-user-button",3,"click"],[1,"right-button-container"],["mat-icon-button","","aria-label","",1,"grid-button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(n,o){if(n&1){let s=O();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-custom-button",4),m("click",function(){return C(s),_(o.seeAllPosts())}),r(),b(4,"span",5),r(),i(5,"div",6)(6,"div",7)(7,"app-custom-search",8),m("searchKey",function(Se){return C(s),_(o.onInputSearch(Se))}),r(),i(8,"app-custom-button",9),m("click",function(){return C(s),_(o.onClickNewUser())}),r()(),i(9,"div",10)(10,"button",11)(11,"mat-icon"),a(12,"grid_view"),r()(),i(13,"mat-menu",null,0)(15,"button",12),m("click",function(){return C(s),_(o.onClickGridCols(1))}),i(16,"span"),a(17,"1 col"),r()(),i(18,"button",12),m("click",function(){return C(s),_(o.onClickGridCols(2))}),i(19,"span"),a(20,"2 cols"),r()(),i(21,"button",12),m("click",function(){return C(s),_(o.onClickGridCols(3))}),i(22,"span"),a(23,"3 cols"),r()()()()()()()}if(n&2){let s=H(14);l(10),f("matMenuTriggerFor",s)}},dependencies:[ge,me,_e,Ce,fe,oe,w,xe],styles:[".mat-toolbar-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;padding:0 10px}.mat-toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;border-radius:12px;margin-top:15px;min-height:65px;width:99%;max-width:100%;box-shadow:0 2px 3px #0000004d;padding:8px 12px;flex-wrap:wrap}.left-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-shrink:0}.right-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center;flex-wrap:wrap;gap:8px}.funct-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:8px;flex-wrap:wrap}.new-user-button[_ngcontent-%COMP%]{margin:0}.right-button-container[_ngcontent-%COMP%]{display:flex;gap:5px}.elements-button[_ngcontent-%COMP%], .grid-button[_ngcontent-%COMP%]{box-shadow:0 2px 3px #0000004d;margin:0}@media (min-width: 430px) and (max-width: 690px){.mat-toolbar[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;gap:10px;padding:10px 8px;min-height:auto}.left-container[_ngcontent-%COMP%]{margin:10px}.right-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.funct-container[_ngcontent-%COMP%]{width:100%;justify-content:center;gap:10px}.right-button-container[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 429px){.mat-toolbar[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;gap:10px;padding:10px 8px;min-height:auto}.funct-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;justify-content:center;margin:0}.right-button-container[_ngcontent-%COMP%]{justify-content:center;width:100%}  .mat-mdc-button-touch-target{width:40px!important;height:40px!important}}"]})};function Oe(t,e){t&1&&a(0," name is required ")}function ke(t,e){if(t&1&&(i(0,"mat-error",3),d(1,Oe,1,0),r()),t&2){let n=h();l(),u(n.newUserForm.controls.name.hasError("required")?1:-1)}}function Fe(t,e){t&1&&a(0," email is required ")}function Ee(t,e){t&1&&a(0," insert a vaild mail (eg. name@example.com) ")}function Ie(t,e){if(t&1&&(i(0,"mat-error"),d(1,Fe,1,0),d(2,Ee,1,0),r()),t&2){let n=h();l(),u(n.newUserForm.controls.email.hasError("required")?1:-1),l(),u(n.newUserForm.controls.email.hasError("email")?2:-1)}}function Ne(t,e){t&1&&a(0," gender is required ")}function Te(t,e){if(t&1&&(i(0,"mat-error"),d(1,Ne,1,0),r()),t&2){let n=h();l(),u(n.newUserForm.controls.gender.hasError("required")?1:-1)}}function Be(t,e){t&1&&a(0," status is required ")}function Le(t,e){if(t&1&&(i(0,"mat-error"),d(1,Be,1,0),r()),t&2){let n=h();l(),u(n.newUserForm.controls.status.hasError("required")?1:-1)}}var L=class t{fb=p(ne);dialogRef=p(I);newUserForm=this.fb.group({name:new D("",[M.required]),email:new D("",[M.required,M.email]),gender:new D("",[M.required]),status:new D("",[M.required])});submitData(){if(this.newUserForm.invalid){console.log("create-user-dialog says: form invalid");return}console.log("create-user-dialog says: ",this.newUserForm),this.dialogRef.close(this.newUserForm.value)}clearForm(){this.newUserForm.reset()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=g({type:t,selectors:[["app-create-user-dialog"]],decls:35,vars:5,consts:[[1,"new-user-form",3,"formGroup"],["appearance","outline",1,"mat-form-field-medium-space"],["matInput","","formControlName","name","required",""],[1,"mat-error"],["appearance","outline",1,"mat-form-field-large-space"],["matInput","","formControlName","email","required",""],["formControlName","gender","required",""],["value","male"],["value","female"],["formControlName","status","required",""],["value","active"],["value","inactive"],[1,"form-button-group"],["matIconName","add","matButtonContent","Add","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",1,"add-button",3,"click"],["matIconName","delete","matButtonContent","Clear","backGroundColor","#FFD9E1","textColor","#8F0045","waveColor","#8F0045",1,"clear-button",3,"click"]],template:function(n,o){n&1&&(i(0,"app-custom-dialog-container")(1,"p"),a(2,"Insert new user"),r(),i(3,"form",0)(4,"mat-form-field",1)(5,"mat-label"),a(6,"Name"),r(),b(7,"input",2),d(8,ke,2,1,"mat-error",3),r(),i(9,"mat-form-field",4)(10,"mat-label"),a(11,"Email"),r(),b(12,"input",5),d(13,Ie,3,2,"mat-error"),r(),i(14,"mat-form-field",1)(15,"mat-label"),a(16,"Gender"),r(),i(17,"mat-select",6)(18,"mat-option",7),a(19,"Male"),r(),i(20,"mat-option",8),a(21,"Female"),r()(),d(22,Te,2,1,"mat-error"),r(),i(23,"mat-form-field",1)(24,"mat-label"),a(25,"Status"),r(),i(26,"mat-select",9)(27,"mat-option",10),a(28,"active"),r(),i(29,"mat-option",11),a(30,"inactive"),r()(),d(31,Le,2,1,"mat-error"),r()(),i(32,"div",12)(33,"app-custom-button",13),m("click",function(){return o.submitData()}),r(),i(34,"app-custom-button",14),m("click",function(){return o.clearForm()}),r()()()),n&2&&(l(3),f("formGroup",o.newUserForm),l(5),u(o.newUserForm.controls.name.invalid&&o.newUserForm.controls.name.touched?8:-1),l(5),u(o.newUserForm.controls.email.invalid&&o.newUserForm.controls.email.touched?13:-1),l(9),u(o.newUserForm.controls.gender.invalid&&o.newUserForm.controls.gender.touched?22:-1),l(9),u(o.newUserForm.controls.status.invalid&&o.newUserForm.controls.status.touched?31:-1))},dependencies:[ie,Y,Q,W,X,te,Z,ee,se,re,le,ae,ve,be,w,Me],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.new-user-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin-bottom:20px}.add-button[_ngcontent-%COMP%], .clear-button[_ngcontent-%COMP%]{margin:0 10px}.mat-form-field-medium-space[_ngcontent-%COMP%]{margin-bottom:10px}.mat-form-field-large-space[_ngcontent-%COMP%]{margin-bottom:20px}"]})};var V=class t{ref=p(I);data=p(he);close(e){this.ref.close(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=g({type:t,selectors:[["app-confirm-dialog"]],decls:9,vars:2,consts:[[1,"confirm-dialog-container"],[1,"header-group"],[1,"button-group"],["matIconName","cancel","matButtonContent","Cancel","backGroundColor","#FFD9E1","textColor","#8F0045","waveColor","#8F0045",3,"click"],["matIconName","check_circle","matButtonContent","Confrim","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",3,"click"]],template:function(n,o){n&1&&(i(0,"div",0)(1,"div",1)(2,"h4"),a(3),r(),i(4,"p"),a(5),r()(),i(6,"div",2)(7,"app-custom-button",3),m("click",function(){return o.close(!1)}),r(),i(8,"app-custom-button",4),m("click",function(){return o.close(!0)}),r()()()),n&2&&(l(3),y(o.data.title),l(2),y(o.data.content))},dependencies:[w],styles:[".confirm-dialog-container[_ngcontent-%COMP%]{margin:20px;padding:10px}.header-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}.header-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{word-wrap:break-word}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-top:15px;gap:10px;flex-wrap:wrap}@media (max-width: 479px){.confirm-dialog-container[_ngcontent-%COMP%]{margin:10px;padding:5px}.button-group[_ngcontent-%COMP%]{flex-direction:column;width:100%}.button-group[_ngcontent-%COMP%]   app-custom-button[_ngcontent-%COMP%]{width:100%}}"]})};var Ve=(t,e)=>e.id;function je(t,e){t&1&&(i(0,"div",1)(1,"h2"),a(2,"No match found"),r()())}function Ge(t,e){if(t&1){let n=O();i(0,"app-user-card",5),m("delete",function(s){C(n);let c=h(2);return _(c.onDeleteUser(s))}),r()}if(t&2){let n=e.$implicit;f("user",n)}}function qe(t,e){if(t&1&&(i(0,"app-custom-grid",2),z(1,Ge,1,1,"app-user-card",4,Ve),r()),t&2){let n=h();f("gridCols",n.gridCols()),l(),R(n.filteredUsers())}}var j=class t{apiService=p(E);dialog=p(we);snackBar=p(Ue);allUsers=x([]);searchTerm=x("");pageIndex=x(0);pageSize=x(5);gridCols=x(2);isLoading=x(!0);searchedUsers=k(()=>{let e=this.searchTerm().toLowerCase();return e?this.allUsers().filter(n=>n.name.toLowerCase().includes(e)||n.email.toLowerCase().includes(e)):this.allUsers()});filteredUsers=k(()=>{let e=this.searchedUsers(),n=this.pageSize()*this.pageIndex(),o=n+this.pageSize();return e.slice(n,o)});total=k(()=>this.searchedUsers().length);get page(){return this.pageIndex()}get per_page(){return this.pageSize()}ngOnInit(){console.log("user-list initialized"),this.load()}load(){this.apiService.userList({page:this.page,per_page:this.per_page,name:"",email:""}).subscribe({next:e=>{this.allUsers.set(e.body??[]),console.log("user-list says: loaded all users",this.allUsers().length)},error:e=>{console.error("Error loading users:",e),this.snackBar.open("Error loading users","Close",{duration:3e3})},complete:()=>{this.isLoading.set(!1)}})}onGridCols(e){this.gridCols.set(e)}onNewUser(){console.log("user-list says: new user clicked"),this.openCreateUserDialog()}openCreateUserDialog(){console.log("user-list says: opening dialog"),this.dialog.open(L).afterClosed().subscribe(e=>{console.log("user-list says: sending data...",e),e&&this.apiService.createUser(e).subscribe({next:()=>{this.snackBar.open("User created successfully","OK",{duration:3e3}),this.pageIndex.set(0),this.load()},error:n=>{let o=n?.error?.message||"Creation error";this.snackBar.open(o,"Close",{duration:3e3})}})})}onDeleteUser(e){console.log("user-list says deleting user with ",e),this.dialog.open(V,{data:{title:"Confirm Delete User",content:"Are you sure you want to delete this user?"}}).afterClosed().subscribe(o=>{console.log("confirm-dialog says after closed: ",o),o&&this.apiService.deleteUser(e).subscribe({next:()=>{this.snackBar.open("User deleted successfully.","OK",{duration:3e3});let s=this.allUsers().filter(c=>c.id!==e);this.allUsers.set(s),this.filteredUsers().length===0&&this.pageIndex()>0&&this.pageIndex.update(c=>c-1)},error:()=>{this.snackBar.open("User deletion failed","Close",{duration:2e3})}})})}onSearchKey(e){this.searchTerm.set(e),this.pageIndex.set(0)}onElementsPerPage(e){this.pageSize.set(e),this.pageIndex.set(0),console.log("user-list says: elements per page",e)}onPageChange(e){this.pageSize.set(e.pageSize),this.pageIndex.set(e.pageIndex),console.log("user-list says: per page changed",this.pageSize()),console.log(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=g({type:t,selectors:[["app-user-list"]],decls:4,vars:3,consts:[[3,"gridCols","newUser","inputValue"],[2,"display","flex","justify-content","center","align-items","center","height","50vh"],[3,"gridCols"],[3,"pageChange","pageSize","length"],[3,"user"],[3,"delete","user"]],template:function(n,o){n&1&&(i(0,"app-user-list-header",0),m("gridCols",function(c){return o.onGridCols(c)})("newUser",function(){return o.onNewUser()})("inputValue",function(c){return o.onSearchKey(c)}),r(),d(1,je,3,0,"div",1)(2,qe,3,1,"app-custom-grid",2),i(3,"app-custom-paginator",3),m("pageChange",function(c){return o.onPageChange(c)}),r()),n&2&&(l(),u(!o.isLoading()&&o.filteredUsers().length===0?1:2),l(2),f("pageSize",o.per_page)("length",o.total()))},dependencies:[N,B,ye,De],styles:["[_nghost-%COMP%]{display:block;padding-bottom:100px}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(var(--cols, 3),minmax(0,1fr));gap:30px}app-user-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;width:99%}@media (max-width: 479px){[_nghost-%COMP%]{padding-bottom:120px}}@media (min-width: 480px) and (max-width: 767px){[_nghost-%COMP%]{padding-bottom:110px}}"]})};var Ae=[{path:"",component:j},{path:":id",loadComponent:()=>import("./chunk-7FXAAJXX.js").then(t=>t.UserDetailsPageComponent)}],G=class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=S({type:t});static \u0275inj=P({imports:[q.forChild(Ae),q]})};var Pe=class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=S({type:t});static \u0275inj=P({imports:[$,G]})};export{Pe as UsersModule};
