import{a as w,b as ee,c as te,d as oe,e as ne,j as ie,k as D,l as ae,o as P,p as re}from"./chunk-JH3KXNL4.js";import{c as v}from"./chunk-NYYPTCT3.js";import{a as H,b as g,d as L,e as U,g as h,i as Q,j as z,k as K,l as $,m as J,o as y,p as W,q as X,t as Y,x as Z}from"./chunk-IJ76IF62.js";import{Ba as s,Ca as l,Ea as I,Fa as B,Ga as u,Ha as a,Ia as i,Ja as c,Ka as A,La as S,N as d,Na as q,P as k,Pa as x,Q as E,Ra as _,Va as j,Wa as G,Xa as V,db as m,eb as O,ga as r,ra as p,sb as R,tb as b}from"./chunk-XTFFYJHZ.js";var C=class e{title=b("");body=b("");static \u0275fac=function(t){return new(t||e)};static \u0275cmp=p({type:e,selectors:[["app-custom-post-card-header"]],inputs:{title:[1,"title"],body:[1,"body"]},decls:5,vars:2,consts:[[1,"header"],[1,"header-title"],[1,"header-body"]],template:function(t,n){t&1&&(A(0,"div",0)(1,"h4",1),m(2),S(),A(3,"p",2),m(4),S()()),t&2&&(r(2),O(n.title()),r(2),O(n.body()))},styles:[".header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;background-color:#fff8f8;border-radius:15px;padding:15px;margin:10px;box-shadow:0 2px 3px #0000004d;word-wrap:break-word;overflow-wrap:break-word}.header-title[_ngcontent-%COMP%]{letter-spacing:2px;text-align:center;word-break:break-word;width:100%}.header-body[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border-radius:15px;box-shadow:0 2px 3px #0000004d;word-break:break-word;width:100%}@media (max-width: 479px){.header[_ngcontent-%COMP%]{padding:10px;margin:5px}.header-title[_ngcontent-%COMP%]{font-size:16px;letter-spacing:1px}.header-body[_ngcontent-%COMP%]{font-size:14px;padding:8px}}"]})};var se=["commentFormContainer"],le=(e,o)=>o.id;function ce(e,o){if(e&1&&c(0,"app-custom-post-card-header",0),e&2){let t=o.$implicit;u("title",t.name)("body",t.body)}}function pe(e,o){e&1&&(a(0,"p"),m(1," No comments yet "),i())}var M=class e{apiService=d(w);commentFormContainer;data=d(D);postComments=[];constructor(){}ngOnInit(){console.log("post-comments-dialog says: post recived",this.data.post),this.loadPostComments()}loadPostComments(){this.apiService.getCommentsForPost(this.data.post?.id).subscribe(o=>{this.postComments=o,console.log("post-comments-dialog says comments fetched for post with id: "+this.data.post.id,o)})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=p({type:e,selectors:[["app-post-comments-dialog"]],viewQuery:function(t,n){if(t&1&&j(se,5),t&2){let f;G(f=V())&&(n.commentFormContainer=f.first)}},decls:8,vars:3,consts:[[3,"title","body"],[1,"dialog-comment-container"],[1,"dialog-comment-container-title"]],template:function(t,n){t&1&&(a(0,"app-custom-dialog-container"),c(1,"app-custom-post-card-header",0),a(2,"div",1)(3,"h3",2),m(4," Comments "),i(),I(5,ce,1,2,"app-custom-post-card-header",0,le),i(),s(7,pe,2,0,"p"),i()),t&2&&(r(),u("title",n.data.post.title)("body",n.data.post.body),r(4),B(n.postComments),r(2),l(n.postComments.length===0?7:-1))},dependencies:[P,C,y],styles:[".form-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:90%;margin-top:10px;margin-bottom:10px}.dialog-comment-container-title[_ngcontent-%COMP%]{text-align:center;font-weight:700}.dialog-comment-container-comments[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:normal;padding:10px;border-radius:15px;box-shadow:0 2px 3px #0000004d}.new-comment-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.new-comment-form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:80%;align-items:center;padding:20px;margin:10px;border-radius:15px;box-shadow:0 2px 3px #0000004d}"]})};function ue(e,o){e&1&&m(0," Title is required ")}function Ce(e,o){e&1&&m(0," min length is 3 ")}function fe(e,o){if(e&1&&(a(0,"mat-error",6),s(1,ue,1,0)(2,Ce,1,0),i()),e&2){let t=_();r(),l(t.newCommentForm.controls.title.hasError("required")?1:2)}}function ge(e,o){e&1&&m(0," email is required ")}function xe(e,o){e&1&&m(0," Insert a vaild mail (eg. name@example.com) ")}function be(e,o){if(e&1&&(a(0,"mat-error"),s(1,ge,1,0),s(2,xe,1,0),i()),e&2){let t=_();r(),l(t.newCommentForm.controls.email.hasError("required")?1:-1),r(),l(t.newCommentForm.controls.email.hasError("email")?2:-1)}}function _e(e,o){e&1&&m(0," Body required ")}function he(e,o){if(e&1&&(a(0,"mat-error"),s(1,_e,1,0),i()),e&2){let t=_();r(),l(t.newCommentForm.controls.body.hasError("required")?1:-1)}}var F=class e{fb=d(J);dialogRef=d(ie);data=d(D);newCommentForm=this.fb.group({title:new h("",[g.required,g.minLength(3)]),email:new h("",[g.required,g.email]),body:new h("",[g.required,g.maxLength(1e3)])});submitData(){if(this.newCommentForm.invalid){console.log("create-user-dialog says: form invalid");return}let o={post_id:this.data.post.id,name:this.newCommentForm.value.title,email:this.newCommentForm.value.email,body:this.newCommentForm.value.body};console.log("add-comment-dialog says: form submitted",this.newCommentForm),this.dialogRef.close(o)}onClearButton(){this.newCommentForm.reset()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=p({type:e,selectors:[["app-add-comment-dialog"]],decls:26,vars:6,consts:[["commentFormContainer",""],[3,"title","body"],[1,"new-comment-form-container"],[1,"new-comment-form",3,"formGroup"],["appearance","outline",1,"mat-form-field-medium-space"],["matInput","","formControlName","title","required",""],[1,"mat-error"],["appearance","outline",1,"mat-form-field-large-space"],["matInput","","formControlName","email","required",""],["matInput","","formControlName","body","required",""],[1,"form-button-group"],["matIconName","add","matButtonContent","Add","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",3,"click"],["matIconName","close","matButtonContent","Clear","backGroundColor","#FFD9E1","textColor","#8F0045","waveColor","#8F0045",1,"clear-button",3,"click"]],template:function(t,n){if(t&1){let f=q();a(0,"app-custom-dialog-container"),c(1,"app-custom-post-card-header",1),a(2,"div",2,0)(4,"h3"),m(5,"Insert new comment"),i(),a(6,"form",3)(7,"mat-form-field",4)(8,"mat-label"),m(9,"Title"),i(),c(10,"input",5),s(11,fe,3,1,"mat-error",6),i(),a(12,"mat-form-field",7)(13,"mat-label"),m(14,"Email"),i(),c(15,"input",8),s(16,be,3,2,"mat-error"),i(),a(17,"mat-form-field",4)(18,"mat-label"),m(19,"Comment"),i(),a(20,"textarea",9),m(21,"        "),i(),s(22,he,2,1,"mat-error"),i()(),a(23,"div",10)(24,"app-custom-button",11),x("click",function(){return k(f),E(n.submitData())}),i(),a(25,"app-custom-button",12),x("click",function(){return k(f),E(n.onClearButton())}),i()()()()}t&2&&(r(),u("title",n.data.post.title)("body",n.data.post.body),r(5),u("formGroup",n.newCommentForm),r(5),l(n.newCommentForm.controls.title.invalid&&n.newCommentForm.controls.title.touched?11:-1),r(5),l(n.newCommentForm.controls.email.invalid&&n.newCommentForm.controls.email.touched?16:-1),r(6),l(n.newCommentForm.controls.body.invalid&&n.newCommentForm.controls.body.touched?22:-1))},dependencies:[P,C,v,Y,Z,W,y,Q,H,L,U,$,z,K,X],styles:[".form-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:90%;margin-top:10px;margin-bottom:10px}.dialog-comment-container-title[_ngcontent-%COMP%]{text-align:center;font-weight:700}.dialog-comment-container-comments[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:normal;padding:10px;border-radius:15px;box-shadow:0 2px 3px #0000004d}.new-comment-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.new-comment-form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:80%;align-items:center;padding:20px;margin:10px;border-radius:15px;box-shadow:0 2px 3px #0000004d}.mat-form-field-medium-space[_ngcontent-%COMP%]{margin-bottom:10px}.mat-form-field-large-space[_ngcontent-%COMP%]{margin-bottom:20px}"]})};var me=class e{dialog=d(ae);apiService=d(w);snackBar=d(re);post=b.required();clickComments=R();ngOnInit(){console.log("user-post-card initialized")}onClickComments(){console.log("user-post-card says: comments button clicked"),this.dialog.open(M,{data:{post:this.post()}}).afterClosed().subscribe(o=>{console.log("user-post-card says: saving new comment...",o),o&&this.apiService.addNewComment(this.post().id,o).subscribe({next:()=>{this.snackBar.open("Comment added successfully","OK",{duration:3e3})},error:t=>{let n=t?.error?.message||"Creation error";this.snackBar.open(n,"Chiudi",{duration:3e3})}})})}onClickAddComment(){this.dialog.open(F,{data:{post:this.post()}}).afterClosed().subscribe(o=>{console.log("user-post-card says: saving new comment...",o),o&&this.apiService.addNewComment(this.post().id,o).subscribe({next:()=>{this.snackBar.open("Comment added successfully","OK",{duration:3e3})},error:t=>{let n=t?.error?.message||"Creation error";this.snackBar.open(n,"Chiudi",{duration:3e3})}})})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=p({type:e,selectors:[["app-user-post-card"]],inputs:{post:[1,"post"]},outputs:{clickComments:"clickComments"},decls:9,vars:2,consts:[[3,"title","body"],[2,"justify-content","center"],[1,"card-button-group"],["matIconName","comment","matButtonContent","See comments","backGroundColor","lightblue","textColor","darkblue","waveColor","darkblue",3,"click"],["matIconName","add","matButtonContent","Add comment","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",1,"add-button",3,"click"]],template:function(t,n){t&1&&(a(0,"mat-accordion"),c(1,"app-custom-post-card-header",0),a(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title",1),m(5," More "),i()(),a(6,"div",2)(7,"app-custom-button",3),x("click",function(){return n.onClickComments()}),i(),a(8,"app-custom-button",4),x("click",function(){return n.onClickAddComment()}),i()()()()),t&2&&(r(),u("title",n.post().title)("body",n.post().body))},dependencies:[ne,ee,te,v,oe,C],styles:[".card-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;gap:10px;padding:10px;flex-wrap:wrap}@media (max-width: 479px){.card-button-group[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center}}"]})};export{me as a};
