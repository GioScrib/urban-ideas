import{a as y,c as Y,d as Z,e as ee,f as te,h,q as oe,r as w,s as ne,t as _,u as ie}from"./chunk-YXTKP4I4.js";import{B as H,C as U,E as b,G as Q,H as z,I as L,J as K,K as $,M as x,Q as J,T as W,X,y as R,z as g}from"./chunk-YBMRMBKT.js";import{$a as a,Aa as I,Ba as B,Ca as l,Da as r,Ea as n,Fa as d,Ga as k,Ha as F,Ja as T,La as C,M as s,O as D,P as M,Ra as j,Sa as V,Ta as G,ab as E,ea as m,ob as q,pa as p,pb as f,ya as N,za as A}from"./chunk-TZHLYIMN.js";var c=class i{title=f("");body=f("");static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-custom-post-card-header"]],inputs:{title:[1,"title"],body:[1,"body"]},decls:5,vars:2,consts:[[1,"header"],[1,"header-title"],[1,"header-body"]],template:function(e,o){e&1&&(k(0,"div",0)(1,"h4",1),a(2),F(),k(3,"p",2),a(4),F()()),e&2&&(m(2),E(o.title()),m(2),E(o.body()))},styles:[".header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;background-color:#fff8f8;border-radius:15px;padding:15px;margin:10px;box-shadow:0 2px 3px #0000004d;word-wrap:break-word;overflow-wrap:break-word}.header-title[_ngcontent-%COMP%]{letter-spacing:2px;text-align:center;word-break:break-word;width:100%}.header-body[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border-radius:15px;box-shadow:0 2px 3px #0000004d;word-break:break-word;width:100%}@media (max-width: 479px){.header[_ngcontent-%COMP%]{padding:10px;margin:5px}.header-title[_ngcontent-%COMP%]{font-size:16px;letter-spacing:1px}.header-body[_ngcontent-%COMP%]{font-size:14px;padding:8px}}"]})};var me=["commentFormContainer"],se=(i,t)=>t.id;function de(i,t){if(i&1&&d(0,"app-custom-post-card-header",0),i&2){let e=t.$implicit;l("title",e.name)("body",e.body)}}function pe(i,t){i&1&&(r(0,"p"),a(1," No comments yet "),n())}var v=class i{apiService=s(y);commentFormContainer;data=s(w);postComments=[];constructor(){}ngOnInit(){console.log("post-comments-dialog says: post recived",this.data.post),this.loadPostComments()}loadPostComments(){this.apiService.getCommentsForPost(this.data.post?.id).subscribe(t=>{this.postComments=t,console.log("post-comments-dialog says comments fetched for post with id: "+this.data.post.id,t)})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-post-comments-dialog"]],viewQuery:function(e,o){if(e&1&&j(me,5),e&2){let u;V(u=G())&&(o.commentFormContainer=u.first)}},decls:8,vars:3,consts:[[3,"title","body"],[1,"dialog-comment-container"],[1,"dialog-comment-container-title"]],template:function(e,o){e&1&&(r(0,"app-custom-dialog-container"),d(1,"app-custom-post-card-header",0),r(2,"div",1)(3,"h3",2),a(4," Comments "),n(),I(5,de,1,2,"app-custom-post-card-header",0,se),n(),N(7,pe,2,0,"p"),n()),e&2&&(m(),l("title",o.data.post.title)("body",o.data.post.body),m(4),B(o.postComments),m(2),A(o.postComments.length===0?7:-1))},dependencies:[_,c,x],styles:[".form-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:90%;margin-top:10px;margin-bottom:10px}.dialog-comment-container-title[_ngcontent-%COMP%]{text-align:center;font-weight:700}.dialog-comment-container-comments[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:normal;padding:10px;border-radius:15px;box-shadow:0 2px 3px #0000004d}.new-comment-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.new-comment-form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:80%;align-items:center;padding:20px;margin:10px;border-radius:15px;box-shadow:0 2px 3px #0000004d}"]})};var P=class i{fb=s($);dialogRef=s(oe);data=s(w);isValidForm=!1;newCommentForm=this.fb.group({name:new b("",[g.required]),email:new b("",[g.required,g.email]),body:new b("",[g.required])});submitData(){this.newCommentForm.invalid&&(console.log("create-user-dialog says: form invalid"),this.isValidForm=!1),this.isValidForm=!0;let t={post_id:this.data.post.id,name:this.newCommentForm.value.name,email:this.newCommentForm.value.email,body:this.newCommentForm.value.body};this.dialogRef.close(t)}onClearButton(){this.newCommentForm.reset()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-add-comment-dialog"]],decls:22,vars:3,consts:[["commentFormContainer",""],[3,"title","body"],[1,"new-comment-form-container"],[1,"new-comment-form",3,"formGroup"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","email","required",""],["matInput","","formControlName","body","required",""],[1,"form-button-group"],["matIconName","add","matButtonContent","Add","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",3,"click"],["matIconName","close","matButtonContent","Clear","backGroundColor","#FFD9E1","textColor","#8F0045","waveColor","#8F0045",1,"clear-button",3,"click"]],template:function(e,o){if(e&1){let u=T();r(0,"app-custom-dialog-container"),d(1,"app-custom-post-card-header",1),r(2,"div",2,0)(4,"h3"),a(5,"Insert new comment"),n(),r(6,"form",3)(7,"mat-form-field")(8,"mat-label"),a(9,"Title"),n(),d(10,"input",4),n(),r(11,"mat-form-field")(12,"mat-label"),a(13,"Email"),n(),d(14,"input",5),n(),r(15,"mat-form-field")(16,"mat-label"),a(17,"Comment"),n(),d(18,"input",6),n()(),r(19,"div",7)(20,"app-custom-button",8),C("click",function(){return D(u),M(o.submitData())}),n(),r(21,"app-custom-button",9),C("click",function(){return D(u),M(o.onClearButton())}),n()()()()}e&2&&(m(),l("title",o.data.post.title)("body",o.data.post.body),m(5),l("formGroup",o.newCommentForm))},dependencies:[_,c,h,W,X,J,x,Q,R,H,U,K,z,L],styles:[".form-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:90%;margin-top:10px;margin-bottom:10px}.dialog-comment-container-title[_ngcontent-%COMP%]{text-align:center;font-weight:700}.dialog-comment-container-comments[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:normal;padding:10px;border-radius:15px;box-shadow:0 2px 3px #0000004d}.new-comment-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.new-comment-form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:80%;align-items:center;padding:20px;margin:10px;border-radius:15px;box-shadow:0 2px 3px #0000004d}"]})};var re=class i{dialog=s(ne);apiService=s(y);snackBar=s(ie);post=f.required();clickComments=q();ngOnInit(){console.log("user-post-card initialized")}onClickComments(){console.log("user-post-card says: comments button clicked"),this.dialog.open(v,{data:{post:this.post()}}).afterClosed().subscribe(t=>{console.log("user-post-card says: saving new comment...",t),t&&this.apiService.addNewComment(this.post().id,t).subscribe({next:()=>{this.snackBar.open("Comment added successfully","OK",{duration:3e3})},error:e=>{let o=e?.error?.message||"Creation error";this.snackBar.open(o,"Chiudi",{duration:3e3})}})})}onClickAddComment(){this.dialog.open(P,{data:{post:this.post()}}).afterClosed().subscribe(t=>{console.log("user-post-card says: saving new comment...",t),t&&this.apiService.addNewComment(this.post().id,t).subscribe({next:()=>{this.snackBar.open("Comment added successfully","OK",{duration:3e3})},error:e=>{let o=e?.error?.message||"Creation error";this.snackBar.open(o,"Chiudi",{duration:3e3})}})})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-user-post-card"]],inputs:{post:[1,"post"]},outputs:{clickComments:"clickComments"},decls:9,vars:2,consts:[[3,"title","body"],[2,"justify-content","center"],[1,"card-button-group"],["matIconName","comment","matButtonContent","See comments","backGroundColor","lightblue","textColor","darkblue","waveColor","darkblue",3,"click"],["matIconName","add","matButtonContent","Add comment","backGroundColor","#C6D870","textColor","#556B2F","waveColor","#556B2F",1,"add-button",3,"click"]],template:function(e,o){e&1&&(r(0,"mat-accordion"),d(1,"app-custom-post-card-header",0),r(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title",1),a(5," More "),n()(),r(6,"div",2)(7,"app-custom-button",3),C("click",function(){return o.onClickComments()}),n(),r(8,"app-custom-button",4),C("click",function(){return o.onClickAddComment()}),n()()()()),e&2&&(m(),l("title",o.post().title)("body",o.post().body))},dependencies:[te,Y,Z,h,ee,c],styles:[".card-button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;gap:10px;padding:10px;flex-wrap:wrap}@media (max-width: 479px){.card-button-group[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center}}"]})};export{re as a};
